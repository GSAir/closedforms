prog: {
  Assign(i,Const(0))
  Assign(z,New(A))
  Assign(x,Ref(z))
  While(Less(Ref(i),Const(100)),{
    Assign(y,New(B))
    Put(Ref(y),Const(head),Ref(i))
    Put(Ref(y),Const(tail),Ref(x))
    Assign(x,Ref(y))
    Assign(i,Plus(Ref(i),Const(1)))
  })
}
val x0 = Map()
val x1 = Map("val" -> 0)
val x2 = Map("&i" -> x1)
val x3 = Map("top" -> Map())
val x4 = Map("&i" -> x1, "A" -> x3)
val x5 = Map("val" -> (A,top))
val x6 = Map("&i" -> x1, "A" -> x3, "&z" -> x5)
val x7 = Map("&i" -> x1, "A" -> x3, "&z" -> x5, "&x" -> x5)
val x10 = ("top",x9)
starting spec loop with x7
val x11 = ("B",x10)
val x12 = x0 + (x9 -> Map())
val x13 = Map("top" -> x12)
val x14 = Map("&x" -> x5, "B" -> x13, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x15 = Map("val" -> x11)
val x16 = Map("&x" -> x5, "&y" -> x15, "B" -> x13, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x17 = Map("head" -> 0)
val x18 = x0 + (x9 -> x17)
val x19 = Map("top" -> x18)
val x20 = Map("&x" -> x5, "&y" -> x15, "B" -> x19, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x21 = Map("head" -> 0, "tail" -> (A,top))
val x22 = x0 + (x9 -> x21)
val x23 = Map("top" -> x22)
val x24 = Map("&x" -> x5, "&y" -> x15, "B" -> x23, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x25 = Map("&x" -> x15, "&y" -> x15, "B" -> x23, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x26 = Map("val" -> 1)
val x27 = Map("&x" -> x15, "&y" -> x15, "B" -> x23, "&z" -> x5, "&i" -> x26, "A" -> x3)
lub(x7, x27) = ?
lub_x8(x7,x7,x27)
lub_x8_&x(x5,x5,x15)
lub_x8_&x_val((A,top),(A,top),x11)
(A,top)

(A,top)

("B",("top",x9))

hit pair -- assume only 0 case differs (loop peeling)
val x28 = x9 + -1
val x29 = ("top",x28)
val x30 = ("B",x29)
val x31 = 0 < x9
val x32 = if (x31) x30 else (A,top)
val x33 = if (x31) x11 else (A,top)
Set(("val",(x32,x33)))
val x34 = Map("val" -> x32)
val x35 = Map("val" -> x33)
lub_x8_&y("undefined","undefined",x15)
lub_x8_&y_val("undefined","undefined",x11)
"undefined"

"undefined"

("B",("top",x9))

hit pair -- assume only 0 case differs (loop peeling)
val x36 = if (x31) x30 else "undefined"
val x37 = if (x31) x11 else "undefined"
Set(("val",(x36,x37)))
val x38 = Map("val" -> x36)
val x39 = Map("val" -> x37)
lub_x8_B("undefined","undefined",x23)
lub_x8_B_top("undefined","undefined",x22)
recursive fun x8_B_top
val x40 = x8_B_top(x28)
val x41 = if (x31) x40 else "undefined"
val x42 = x8_B_top(x9)
val x43 = if (x31) x42 else "undefined"
Set(("top",(x41,x43)))
val x44 = Map("top" -> x41)
val x45 = Map("top" -> x43)
lub_x8_&z(x5,x5,x5)
lub_x8_&i(x1,x1,x26)
lub_x8_&i_val(0,0,1)
0

1

1

confirmed iterative loop, d = 1
Set(("val",(x28,x9)))
val x46 = Map("val" -> x28)
val x47 = Map("val" -> x9)
lub_x8_A(x3,x3,x3)
Set(("&z",(x5,x5)), ("&i",(x46,x47)), ("B",(x44,x45)), ("&y",(x38,x39)), ("A",(x3,x3)), ("&x",(x34,x35)))
val x48 = Map("&x" -> x34, "&y" -> x38, "B" -> x44, "&z" -> x5, "&i" -> x46, "A" -> x3)
val x49 = Map("&x" -> x35, "&y" -> x39, "B" -> x45, "&z" -> x5, "&i" -> x47, "A" -> x3)
lub(x7, x27) = x48
starting spec loop with x48
val x50 = x9 < 101
val x51 = x40 + (x9 -> Map())
val x52 = if (x31) x51 else x12
val x53 = Map("top" -> x52)
val x54 = Map("&x" -> x34, "&y" -> x38, "B" -> x53, "&z" -> x5, "&i" -> x46, "A" -> x3)
val x55 = Map("&x" -> x34, "&y" -> x15, "B" -> x53, "&z" -> x5, "&i" -> x46, "A" -> x3)
val x56 = x40(x9)
val x57 = Map("head" -> x28)
val x58 = x40 + (x9 -> x57)
val x59 = x0 + (x9 -> x57)
val x60 = if (x31) x58 else x59
val x61 = Map("top" -> x60)
val x62 = Map("&x" -> x34, "&y" -> x15, "B" -> x61, "&z" -> x5, "&i" -> x46, "A" -> x3)
val x63 = Map("head" -> x28, "tail" -> x32)
val x64 = x40 + (x9 -> x63)
val x65 = x0 + (x9 -> x63)
val x66 = Map("head" -> x28, "tail" -> x30)
val x67 = x40 + (x9 -> x66)
val x68 = Map("head" -> x28, "tail" -> (A,top))
val x69 = x0 + (x9 -> x68)
val x70 = if (x31) x67 else x69
val x71 = Map("top" -> x70)
val x72 = Map("&x" -> x34, "&y" -> x15, "B" -> x71, "&z" -> x5, "&i" -> x46, "A" -> x3)
val x73 = Map("&x" -> x15, "&y" -> x15, "B" -> x71, "&z" -> x5, "&i" -> x46, "A" -> x3)
val x74 = Map("&x" -> x15, "&y" -> x15, "B" -> x71, "&z" -> x5, "&i" -> x47, "A" -> x3)
lub(x7, x74) = ?
lub_x8(x7,x48,x74)
lub_x8_&x(x5,x34,x15)
lub_x8_&x_val((A,top),x32,x11)
(A,top)

if (0 < x9) ("B",("top",x9 + -1)) else (A,top)

("B",("top",x9))

hit pair -- assume only 0 case differs (loop peeling)
Set(("val",(x32,x33)))
lub_x8_&y("undefined",x38,x15)
lub_x8_&y_val("undefined",x36,x11)
"undefined"

if (0 < x9) ("B",("top",x9 + -1)) else "undefined"

("B",("top",x9))

hit pair -- assume only 0 case differs (loop peeling)
Set(("val",(x36,x37)))
lub_x8_B("undefined",x44,x71)
lub_x8_B_top("undefined",x41,x70)
val x75 = x40 * -1
val x76 = if (x31) x75 else "undefined"
val x77 = x67 + x76
val x78 = x69 + x76
val x79 = x67 + x75
val x80 = if (x31) x79 else "undefined"
if (0 < x9) x8_B_top(x9 + -1) else "undefined"

if (0 < x9) x8_B_top(x9 + -1) + (x9 -> Map("head" -> x9 + -1, "tail" -> ("B",("top",x9 + -1)))) else Map() + (x9 -> Map("head" -> x9 + -1, "tail" -> (A,top)))

if (0 < x9) x8_B_top(x9 + -1) + (x9 -> Map("head" -> x9 + -1, "tail" -> ("B",("top",x9 + -1)))) + x8_B_top(x9 + -1) * -1 else "undefined"

poly: List()
giving up: deriv List()
recursive fun x8_B_top
Set(("top",(x41,x43)))
lub_x8_&z(x5,x5,x5)
lub_x8_&i(x1,x46,x47)
lub_x8_&i_val(0,x28,x9)
val x81 = x9 * -1
val x82 = x81 + 1
x9 + -1

x9

1

confirmed iterative loop, d = 1
Set(("val",(x28,x9)))
lub_x8_A(x3,x3,x3)
Set(("&z",(x5,x5)), ("&i",(x46,x47)), ("B",(x44,x45)), ("&y",(x38,x39)), ("A",(x3,x3)), ("&x",(x34,x35)))
lub(x7, x74) = x48
val x8_&x_val = { x9 => x11 }
val x8_&y_val = { x9 => x11 }
val x8_B_top = { x9 => x70 }
val x83 = Map("top" -> x42)
val x8_&i_val = { x9 => x9 }
val x84 = Map("&x" -> x15, "&y" -> x15, "B" -> x83, "&z" -> x5, "&i" -> x47, "A" -> x3)
val x8 = { x9 => x84 }
fixindex: 100
val x85 = Map("val" -> (B,(top,100)))
val x86 = x8_B_top(100)
val x87 = Map("top" -> x86)
val x88 = Map("val" -> 100)
val x89 = Map("&x" -> x85, "&y" -> x85, "B" -> x87, "&z" -> x5, "&i" -> x88, "A" -> x3)
*** after loop x89 ***
res: ()
store: x89
transformed: x89
sched:
val x88 = Map("val" -> 100)
val x28 = x9 + -1
val x68 = Map("head" -> x28, "tail" -> (A,top))
val x0 = Map()
val x69 = x0 + (x9 -> x68)
val x29 = ("top",x28)
val x30 = ("B",x29)
val x66 = Map("head" -> x28, "tail" -> x30)
val x31 = 0 < x9
val x40 = x8_B_top(x28)
val x67 = x40 + (x9 -> x66)
val x70 = if (x31) x67 else x69
val x8_B_top = { x9 => x70 }
val x86 = x8_B_top(100)
val x87 = Map("top" -> x86)
val x85 = Map("val" -> (B,(top,100)))
val x5 = Map("val" -> (A,top))
val x3 = Map("top" -> Map())
val x89 = Map("&x" -> x85, "&y" -> x85, "B" -> x87, "&z" -> x5, "&i" -> x88, "A" -> x3)
term:
val x8_B_top = { x9 => if (0 < x9) x8_B_top(x9 + -1) + (x9 -> Map("head" -> x9 + -1, "tail" -> ("B",("top",x9 + -1)))) else Map() + (x9 -> Map("head" -> x9 + -1, "tail" -> (A,top))) }
Map("&i" -> Map("val" -> 100), "B" -> Map("top" -> x8_B_top(100)), "A" -> Map("top" -> Map()), "&x" -> Map("val" -> (B,(top,100))), "&z" -> Map("val" -> (A,top)), "&y" -> Map("val" -> (B,(top,100))))

----
prog: {
  Assign(i,Const(0))
  Assign(z,New(A))
  Assign(x,Ref(z))
  Assign(y,New(B))
  While(Less(Ref(i),Const(100)),{
    Put(Ref(y),Const(head),Ref(i))
    Put(Ref(y),Const(tail),Ref(x))
    Assign(x,Ref(y))
    Assign(i,Plus(Ref(i),Const(1)))
  })
}
val x0 = Map()
val x1 = Map("val" -> 0)
val x2 = Map("&i" -> x1)
val x3 = Map("top" -> Map())
val x4 = Map("&i" -> x1, "A" -> x3)
val x5 = Map("val" -> (A,top))
val x6 = Map("&i" -> x1, "A" -> x3, "&z" -> x5)
val x7 = Map("&i" -> x1, "A" -> x3, "&z" -> x5, "&x" -> x5)
val x8 = Map("&x" -> x5, "B" -> x3, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x9 = Map("val" -> (B,top))
val x10 = Map("&x" -> x5, "&y" -> x9, "B" -> x3, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x13 = ("top",x12)
starting spec loop with x10
val x14 = Map("head" -> 0)
val x15 = Map("top" -> x14)
val x16 = Map("&x" -> x5, "&y" -> x9, "B" -> x15, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x17 = Map("head" -> 0, "tail" -> (A,top))
val x18 = Map("top" -> x17)
val x19 = Map("&x" -> x5, "&y" -> x9, "B" -> x18, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x20 = Map("&x" -> x9, "&y" -> x9, "B" -> x18, "&z" -> x5, "&i" -> x1, "A" -> x3)
val x21 = Map("val" -> 1)
val x22 = Map("&x" -> x9, "&y" -> x9, "B" -> x18, "&z" -> x5, "&i" -> x21, "A" -> x3)
lub(x10, x22) = ?
lub_x11(x10,x10,x22)
lub_x11_&x(x5,x5,x9)
lub_x11_&x_val((A,top),(A,top),(B,top))
(A,top)

(A,top)

(B,top)

hit pair -- assume only 0 case differs (loop peeling)
val x23 = x12 + -1
val x24 = 0 < x12
val x25 = if (x24) (B,top) else (A,top)
Set(("val",(x25,x25)))
val x26 = Map("val" -> x25)
lub_x11_&y(x9,x9,x9)
lub_x11_B(x3,x3,x18)
lub_x11_B_top(Map(),Map(),x17)
lub_x11_B_top_head("undefined","undefined",0)
recursive fun x11_B_top_head
val x27 = x11_B_top_head(x23)
val x28 = if (x24) x27 else "undefined"
val x29 = x11_B_top_head(x12)
val x30 = if (x24) x29 else "undefined"
lub_x11_B_top_tail("undefined","undefined",(A,top))
"undefined"

"undefined"

(A,top)

hit pair -- assume only 0 case differs (loop peeling)
val x31 = if (x24) (A,top) else "undefined"
Set(("head",(x28,x30)), ("tail",(x31,x31)))
val x32 = Map("head" -> x28, "tail" -> x31)
val x33 = Map("head" -> x30, "tail" -> x31)
Set(("top",(x32,x33)))
val x34 = Map("top" -> x32)
val x35 = Map("top" -> x33)
lub_x11_&z(x5,x5,x5)
lub_x11_&i(x1,x1,x21)
lub_x11_&i_val(0,0,1)
0

1

1

confirmed iterative loop, d = 1
Set(("val",(x23,x12)))
val x36 = Map("val" -> x23)
val x37 = Map("val" -> x12)
lub_x11_A(x3,x3,x3)
Set(("&z",(x5,x5)), ("B",(x34,x35)), ("&y",(x9,x9)), ("&x",(x26,x26)), ("A",(x3,x3)), ("&i",(x36,x37)))
val x38 = Map("&x" -> x26, "&y" -> x9, "B" -> x34, "&z" -> x5, "&i" -> x36, "A" -> x3)
val x39 = Map("&x" -> x26, "&y" -> x9, "B" -> x35, "&z" -> x5, "&i" -> x37, "A" -> x3)
lub(x10, x22) = x38
starting spec loop with x38
val x40 = x12 < 101
val x41 = Map("head" -> x23, "tail" -> x31)
val x42 = Map("top" -> x41)
val x43 = Map("&x" -> x26, "&y" -> x9, "B" -> x42, "&z" -> x5, "&i" -> x36, "A" -> x3)
val x44 = Map("head" -> x23, "tail" -> x25)
val x45 = Map("top" -> x44)
val x46 = Map("&x" -> x26, "&y" -> x9, "B" -> x45, "&z" -> x5, "&i" -> x36, "A" -> x3)
val x47 = Map("&x" -> x9, "&y" -> x9, "B" -> x45, "&z" -> x5, "&i" -> x36, "A" -> x3)
val x48 = Map("&x" -> x9, "&y" -> x9, "B" -> x45, "&z" -> x5, "&i" -> x37, "A" -> x3)
lub(x10, x48) = ?
lub_x11(x10,x38,x48)
lub_x11_&x(x5,x26,x9)
lub_x11_&x_val((A,top),x25,(B,top))
(A,top)

if (0 < x12) (B,top) else (A,top)

(B,top)

hit pair -- assume only 0 case differs (loop peeling)
Set(("val",(x25,x25)))
lub_x11_&y(x9,x9,x9)
lub_x11_B(x3,x34,x45)
lub_x11_B_top(Map(),x32,x44)
lub_x11_B_top_head("undefined",x28,x23)
val x49 = x27 * -1
val x50 = if (x24) x49 else "undefined"
val x51 = x49 + -1
val x52 = if (x24) x51 else "undefined"
val x53 = x12 + x52
if (0 < x12) x11_B_top_head(x12 + -1) else "undefined"

x12 + -1

x12 + if (0 < x12) x11_B_top_head(x12 + -1) * -1 + -1 else "undefined"

poly: List()
giving up: deriv List()
recursive fun x11_B_top_head
lub_x11_B_top_tail("undefined",x31,x25)
val x54 = (A,top) * -1
val x55 = if (x24) x54 else "undefined"
val x56 = x54 + (B,top)
val x57 = if (x24) x56 else "undefined"
val x58 = if (x24) 0 else "undefined"
if (0 < x12) (A,top) else "undefined"

if (0 < x12) (B,top) else (A,top)

if (0 < x12) (A,top) * -1 + (B,top) else "undefined"

poly: List()
giving up: deriv List()
recursive fun x11_B_top_tail
val x59 = x11_B_top_tail(x23)
val x60 = if (x24) x59 else "undefined"
val x61 = x11_B_top_tail(x12)
val x62 = if (x24) x61 else "undefined"
Set(("head",(x28,x30)), ("tail",(x60,x62)))
val x63 = Map("head" -> x28, "tail" -> x60)
val x64 = Map("head" -> x30, "tail" -> x62)
Set(("top",(x63,x64)))
val x65 = Map("top" -> x63)
val x66 = Map("top" -> x64)
lub_x11_&z(x5,x5,x5)
lub_x11_&i(x1,x36,x37)
lub_x11_&i_val(0,x23,x12)
val x67 = x12 * -1
val x68 = x67 + 1
x12 + -1

x12

1

confirmed iterative loop, d = 1
Set(("val",(x23,x12)))
lub_x11_A(x3,x3,x3)
Set(("&z",(x5,x5)), ("&y",(x9,x9)), ("&x",(x26,x26)), ("A",(x3,x3)), ("&i",(x36,x37)), ("B",(x65,x66)))
val x69 = Map("&x" -> x26, "&y" -> x9, "B" -> x65, "&z" -> x5, "&i" -> x36, "A" -> x3)
val x70 = Map("&x" -> x26, "&y" -> x9, "B" -> x66, "&z" -> x5, "&i" -> x37, "A" -> x3)
lub(x10, x48) = x69
starting spec loop with x69
val x71 = Map("head" -> x23, "tail" -> x60)
val x72 = Map("top" -> x71)
val x73 = Map("&x" -> x26, "&y" -> x9, "B" -> x72, "&z" -> x5, "&i" -> x36, "A" -> x3)
lub(x10, x48) = ?
lub_x11(x10,x69,x48)
lub_x11_&x(x5,x26,x9)
lub_x11_&x_val((A,top),x25,(B,top))
(A,top)

if (0 < x12) (B,top) else (A,top)

(B,top)

hit pair -- assume only 0 case differs (loop peeling)
Set(("val",(x25,x25)))
lub_x11_&y(x9,x9,x9)
lub_x11_B(x3,x65,x45)
lub_x11_B_top(Map(),x63,x44)
lub_x11_B_top_head("undefined",x28,x23)
if (0 < x12) x11_B_top_head(x12 + -1) else "undefined"

x12 + -1

x12 + if (0 < x12) x11_B_top_head(x12 + -1) * -1 + -1 else "undefined"

poly: List()
giving up: deriv List()
recursive fun x11_B_top_head
lub_x11_B_top_tail("undefined",x60,x25)
val x74 = x59 * -1
val x75 = if (x24) x74 else "undefined"
val x76 = x74 + (B,top)
val x77 = if (x24) x76 else "undefined"
val x78 = x74 + (A,top)
val x79 = if (x24) x78 else "undefined"
if (0 < x12) x11_B_top_tail(x12 + -1) else "undefined"

if (0 < x12) (B,top) else (A,top)

if (0 < x12) x11_B_top_tail(x12 + -1) * -1 + (B,top) else "undefined"

poly: List()
giving up: deriv List()
recursive fun x11_B_top_tail
Set(("head",(x28,x30)), ("tail",(x60,x62)))
Set(("top",(x63,x64)))
lub_x11_&z(x5,x5,x5)
lub_x11_&i(x1,x36,x37)
lub_x11_&i_val(0,x23,x12)
x12 + -1

x12

1

confirmed iterative loop, d = 1
Set(("val",(x23,x12)))
lub_x11_A(x3,x3,x3)
Set(("&z",(x5,x5)), ("&y",(x9,x9)), ("&x",(x26,x26)), ("A",(x3,x3)), ("&i",(x36,x37)), ("B",(x65,x66)))
lub(x10, x48) = x69
val x11_&x_val = { x12 => (B,top) }
val x11_B_top_head = { x12 => x23 }
val x11_B_top_tail = { x12 => x25 }
val x11_&i_val = { x12 => x12 }
val x11 = { x12 => x48 }
fixindex: 100
val x80 = Map("head" -> 99, "tail" -> (B,top))
val x81 = Map("top" -> x80)
val x82 = Map("val" -> 100)
val x83 = Map("&x" -> x9, "&y" -> x9, "B" -> x81, "&z" -> x5, "&i" -> x82, "A" -> x3)
*** after loop x83 ***
res: ()
store: x83
transformed: x83
sched:
val x82 = Map("val" -> 100)
val x80 = Map("head" -> 99, "tail" -> (B,top))
val x81 = Map("top" -> x80)
val x9 = Map("val" -> (B,top))
val x5 = Map("val" -> (A,top))
val x3 = Map("top" -> Map())
val x83 = Map("&x" -> x9, "&y" -> x9, "B" -> x81, "&z" -> x5, "&i" -> x82, "A" -> x3)
term:
Map("&i" -> Map("val" -> 100), "B" -> Map("top" -> Map("head" -> 99, "tail" -> (B,top))), "A" -> Map("top" -> Map()), "&x" -> Map("val" -> (B,top)), "&z" -> Map("val" -> (A,top)), "&y" -> Map("val" -> (B,top)))

----
prog: {
  Assign(i,Const(0))
  Assign(z,New(A))
  Assign(x,Ref(z))
  While(Less(Ref(i),Const(100)),{
    Put(Ref(x),Const(head),Ref(i))
    Assign(i,Plus(Ref(i),Const(1)))
  })
}
val x0 = Map()
val x1 = Map("val" -> 0)
val x2 = Map("&i" -> x1)
val x3 = Map("top" -> Map())
val x4 = Map("&i" -> x1, "A" -> x3)
val x5 = Map("val" -> (A,top))
val x6 = Map("&i" -> x1, "A" -> x3, "&z" -> x5)
val x7 = Map("&i" -> x1, "A" -> x3, "&z" -> x5, "&x" -> x5)
val x10 = ("top",x9)
starting spec loop with x7
val x11 = Map("head" -> 0)
val x12 = Map("top" -> x11)
val x13 = Map("&i" -> x1, "A" -> x12, "&z" -> x5, "&x" -> x5)
val x14 = Map("val" -> 1)
val x15 = Map("&i" -> x14, "A" -> x12, "&z" -> x5, "&x" -> x5)
lub(x7, x15) = ?
lub_x8(x7,x7,x15)
lub_x8_&i(x1,x1,x14)
lub_x8_&i_val(0,0,1)
0

1

1

confirmed iterative loop, d = 1
val x16 = x9 + -1
Set(("val",(x16,x9)))
val x17 = Map("val" -> x16)
val x18 = Map("val" -> x9)
lub_x8_A(x3,x3,x12)
lub_x8_A_top(Map(),Map(),x11)
lub_x8_A_top_head("undefined","undefined",0)
recursive fun x8_A_top_head
val x19 = x8_A_top_head(x16)
val x20 = 0 < x9
val x21 = if (x20) x19 else "undefined"
val x22 = x8_A_top_head(x9)
val x23 = if (x20) x22 else "undefined"
Set(("head",(x21,x23)))
val x24 = Map("head" -> x21)
val x25 = Map("head" -> x23)
Set(("top",(x24,x25)))
val x26 = Map("top" -> x24)
val x27 = Map("top" -> x25)
lub_x8_&z(x5,x5,x5)
lub_x8_&x(x5,x5,x5)
Set(("&i",(x17,x18)), ("A",(x26,x27)), ("&z",(x5,x5)), ("&x",(x5,x5)))
val x28 = Map("&i" -> x17, "A" -> x26, "&z" -> x5, "&x" -> x5)
val x29 = Map("&i" -> x18, "A" -> x27, "&z" -> x5, "&x" -> x5)
lub(x7, x15) = x28
starting spec loop with x28
val x30 = x9 < 101
val x31 = Map("head" -> x16)
val x32 = Map("top" -> x31)
val x33 = Map("&i" -> x17, "A" -> x32, "&z" -> x5, "&x" -> x5)
val x34 = Map("&i" -> x18, "A" -> x32, "&z" -> x5, "&x" -> x5)
lub(x7, x34) = ?
lub_x8(x7,x28,x34)
lub_x8_&i(x1,x17,x18)
lub_x8_&i_val(0,x16,x9)
val x35 = x9 * -1
val x36 = x35 + 1
x9 + -1

x9

1

confirmed iterative loop, d = 1
Set(("val",(x16,x9)))
lub_x8_A(x3,x26,x32)
lub_x8_A_top(Map(),x24,x31)
lub_x8_A_top_head("undefined",x21,x16)
val x37 = x19 * -1
val x38 = if (x20) x37 else "undefined"
val x39 = x37 + -1
val x40 = if (x20) x39 else "undefined"
val x41 = x9 + x40
if (0 < x9) x8_A_top_head(x9 + -1) else "undefined"

x9 + -1

x9 + if (0 < x9) x8_A_top_head(x9 + -1) * -1 + -1 else "undefined"

poly: List()
giving up: deriv List()
recursive fun x8_A_top_head
Set(("head",(x21,x23)))
Set(("top",(x24,x25)))
lub_x8_&z(x5,x5,x5)
lub_x8_&x(x5,x5,x5)
Set(("&i",(x17,x18)), ("A",(x26,x27)), ("&z",(x5,x5)), ("&x",(x5,x5)))
lub(x7, x34) = x28
val x8_&i_val = { x9 => x9 }
val x8_A_top_head = { x9 => x16 }
val x8 = { x9 => x34 }
fixindex: 100
val x42 = Map("val" -> 100)
val x43 = Map("head" -> 99)
val x44 = Map("top" -> x43)
val x45 = Map("&i" -> x42, "A" -> x44, "&z" -> x5, "&x" -> x5)
*** after loop x45 ***
res: ()
store: x45
transformed: x45
sched:
val x43 = Map("head" -> 99)
val x44 = Map("top" -> x43)
val x42 = Map("val" -> 100)
val x5 = Map("val" -> (A,top))
val x45 = Map("&i" -> x42, "A" -> x44, "&z" -> x5, "&x" -> x5)
term:
Map("&i" -> Map("val" -> 100), "A" -> Map("top" -> Map("head" -> 99)), "&z" -> Map("val" -> (A,top)), "&x" -> Map("val" -> (A,top)))

----
